    <!-- Admin Panel JavaScript -->
    <script>
        // Global admin panel functionality
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Admin Panel loaded');
            
            // Initialize all components
            initSidebar();
            initToasts();
            initModals();
            initTables();
            initForms();
            initConfirmDialogs();
            
            // Hide page loader
            hidePageLoader();
        });
        
        // Sidebar functionality
        function initSidebar() {
            const sidebar = document.getElementById('sidebar');
            const sidebarOverlay = document.getElementById('sidebarOverlay');
            const sidebarToggle = document.getElementById('sidebarToggle');
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            
            // Mobile menu toggle
            if (mobileMenuBtn) {
                mobileMenuBtn.addEventListener('click', function() {
                    sidebar.classList.remove('-translate-x-full');
                    sidebarOverlay.classList.remove('hidden');
                    document.body.classList.add('overflow-hidden');
                });
            }
            
            // Sidebar close
            if (sidebarToggle) {
                sidebarToggle.addEventListener('click', function() {
                    sidebar.classList.add('-translate-x-full');
                    sidebarOverlay.classList.add('hidden');
                    document.body.classList.remove('overflow-hidden');
                });
            }
            
            // Overlay click to close
            if (sidebarOverlay) {
                sidebarOverlay.addEventListener('click', function() {
                    sidebar.classList.add('-translate-x-full');
                    sidebarOverlay.classList.add('hidden');
                    document.body.classList.remove('overflow-hidden');
                });
            }
            
            // Close sidebar on window resize
            window.addEventListener('resize', function() {
                if (window.innerWidth >= 1024) {
                    sidebar.classList.remove('-translate-x-full');
                    sidebarOverlay.classList.add('hidden');
                    document.body.classList.remove('overflow-hidden');
                }
            });
        }
        
        // Toast notification system
        function initToasts() {
            window.showToast = function(message, type = 'info', duration = 5000) {
                const container = document.getElementById('toastContainer');
                const toast = document.createElement('div');
                
                const icons = {
                    success: 'fas fa-check-circle',
                    error: 'fas fa-exclamation-circle',
                    warning: 'fas fa-exclamation-triangle',
                    info: 'fas fa-info-circle'
                };
                
                const colors = {
                    success: 'bg-green-500',
                    error: 'bg-red-500',
                    warning: 'bg-yellow-500',
                    info: 'bg-blue-500'
                };
                
                toast.className = `${colors[type]} text-white px-6 py-4 rounded-lg shadow-lg flex items-center space-x-3 transform translate-x-full transition-transform duration-300 max-w-sm`;
                toast.innerHTML = `
                    <i class="${icons[type]}"></i>
                    <span class="flex-1">${message}</span>
                    <button onclick="this.parentElement.remove()" class="text-white hover:text-gray-200">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                
                container.appendChild(toast);
                
                // Animate in
                setTimeout(() => {
                    toast.classList.remove('translate-x-full');
                }, 100);
                
                // Auto remove
                setTimeout(() => {
                    toast.classList.add('translate-x-full');
                    setTimeout(() => {
                        if (toast.parentElement) {
                            toast.remove();
                        }
                    }, 300);
                }, duration);
            };
        }
        
        // Modal functionality
        function initModals() {
            window.openModal = function(modalId) {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.remove('hidden');
                    modal.classList.add('flex');
                    document.body.classList.add('overflow-hidden');
                    
                    // Focus first input
                    const firstInput = modal.querySelector('input, select, textarea');
                    if (firstInput) {
                        setTimeout(() => firstInput.focus(), 100);
                    }
                }
            };
            
            window.closeModal = function(modalId) {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.add('hidden');
                    modal.classList.remove('flex');
                    document.body.classList.remove('overflow-hidden');
                }
            };
            
            // Close modal on backdrop click
            document.querySelectorAll('.modal-backdrop').forEach(backdrop => {
                backdrop.addEventListener('click', function(e) {
                    if (e.target === this) {
                        const modal = this.closest('.modal');
                        if (modal) {
                            closeModal(modal.id);
                        }
                    }
                });
            });
            
            // Close modal on escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    const openModal = document.querySelector('.modal:not(.hidden)');
                    if (openModal) {
                        closeModal(openModal.id);
                    }
                }
            });
        }
        
        // Table functionality
        function initTables() {
            // Search functionality
            window.searchTable = function(searchInput, tableId) {
                const filter = searchInput.value.toLowerCase();
                const table = document.getElementById(tableId);
                const rows = table.querySelectorAll('tbody tr');
                
                rows.forEach(row => {
                    const text = row.textContent.toLowerCase();
                    if (text.includes(filter)) {
                        row.style.display = '';
                    } else {
                        row.style.display = 'none';
                    }
                });
                
                updateTableStats(tableId);
            };
            
            // Filter functionality
            window.filterTable = function(filterSelect, tableId, columnIndex) {
                const filterValue = filterSelect.value.toLowerCase();
                const table = document.getElementById(tableId);
                const rows = table.querySelectorAll('tbody tr');
                
                rows.forEach(row => {
                    const cell = row.cells[columnIndex];
                    if (cell) {
                        const cellText = cell.textContent.toLowerCase();
                        if (filterValue === '' || cellText.includes(filterValue)) {
                            row.style.display = '';
                        } else {
                            row.style.display = 'none';
                        }
                    }
                });
                
                updateTableStats(tableId);
            };
            
            function updateTableStats(tableId) {
                const table = document.getElementById(tableId);
                const rows = table.querySelectorAll('tbody tr');
                const visibleRows = table.querySelectorAll('tbody tr:not([style*="display: none"])');
                
                const statsElement = document.getElementById(tableId + 'Stats');
                if (statsElement) {
                    statsElement.textContent = `Showing ${visibleRows.length} of ${rows.length} entries`;
                }
            }
        }
        
        // Form functionality
        function initForms() {
            // Form validation
            window.validateForm = function(formId) {
                const form = document.getElementById(formId);
                const inputs = form.querySelectorAll('input[required], select[required], textarea[required]');
                let isValid = true;
                
                inputs.forEach(input => {
                    if (!input.value.trim()) {
                        input.classList.add('border-red-500');
                        isValid = false;
                    } else {
                        input.classList.remove('border-red-500');
                    }
                });
                
                return isValid;
            };
            
            // Form submission with loading state
            window.submitForm = function(formId, callback) {
                const form = document.getElementById(formId);
                const submitBtn = form.querySelector('button[type="submit"]');
                const originalText = submitBtn.innerHTML;
                
                if (!validateForm(formId)) {
                    showToast('Please fill in all required fields', 'error');
                    return;
                }
                
                // Show loading state
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Processing...';
                submitBtn.disabled = true;
                
                // Simulate API call
                setTimeout(() => {
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                    
                    if (callback) {
                        callback();
                    }
                }, 1000);
            };
        }
        
        // Confirmation dialogs
        function initConfirmDialogs() {
            window.confirmAction = function(message, callback) {
                if (confirm(message)) {
                    callback();
                }
            };
            
            window.deleteItem = function(id, type, callback) {
                const message = `Are you sure you want to delete this ${type}? This action cannot be undone.`;
                confirmAction(message, callback);
            };
        }
        
        // Utility functions
        function showPageLoader() {
            document.getElementById('pageLoader').classList.remove('hidden');
        }
        
        function hidePageLoader() {
            document.getElementById('pageLoader').classList.add('hidden');
        }
        
        // Status toggle functionality
        window.toggleStatus = function(id, currentStatus, type) {
            const newStatus = currentStatus === 'active' ? 'inactive' : 'active';
            const action = newStatus === 'active' ? 'activate' : 'deactivate';
            
            confirmAction(`Are you sure you want to ${action} this ${type}?`, function() {
                showPageLoader();
                
                // Simulate API call
                setTimeout(() => {
                    hidePageLoader();
                    showToast(`${type.charAt(0).toUpperCase() + type.slice(1)} ${action}d successfully`, 'success');
                    
                    // Update UI
                    const statusBadge = document.querySelector(`[data-status-id="${id}"]`);
                    if (statusBadge) {
                        statusBadge.className = statusBadge.className.replace(/status-\w+/, `status-${newStatus}`);
                        statusBadge.textContent = newStatus.charAt(0).toUpperCase() + newStatus.slice(1);
                    }
                    
                    // Update button
                    const toggleBtn = document.querySelector(`[data-toggle-id="${id}"]`);
                    if (toggleBtn) {
                        toggleBtn.textContent = newStatus === 'active' ? 'Deactivate' : 'Activate';
                        toggleBtn.className = toggleBtn.className.replace(/btn-\w+/, newStatus === 'active' ? 'btn-danger' : 'btn-success');
                    }
                }, 1000);
            });
        };
        
        // Auto-refresh functionality
        let autoRefreshInterval;
        
        function startAutoRefresh(interval = 30000) {
            autoRefreshInterval = setInterval(() => {
                // Refresh page data without full reload
                console.log('Auto-refreshing data...');
            }, interval);
        }
        
        function stopAutoRefresh() {
            if (autoRefreshInterval) {
                clearInterval(autoRefreshInterval);
            }
        }
        
        // Start auto-refresh on dashboard
        if (window.location.pathname.includes('/admin/dashboard')) {
            startAutoRefresh();
        }
    </script>
</body>
</html>
