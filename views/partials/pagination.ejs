<% if (pagination && pagination.totalPages > 1) { %>
    <div class="pagination-container">
        <nav class="pagination" aria-label="Course pagination">
            <!-- Previous Page -->
            <% if (pagination.hasPrevPage) { %>
                <a href="?page=<%= pagination.currentPage - 1 %><%= typeof filters !== 'undefined' && filters ? '&' + new URLSearchParams(filters).toString() : '' %>" 
                   class="pagination-item pagination-prev">
                    <i class="fas fa-chevron-left"></i>
                    <span class="sr-only">Previous</span>
                </a>
            <% } else { %>
                <span class="pagination-item pagination-prev disabled">
                    <i class="fas fa-chevron-left"></i>
                    <span class="sr-only">Previous</span>
                </span>
            <% } %>

            <!-- Page Numbers -->
            <% 
                const currentPage = pagination.currentPage;
                const totalPages = pagination.totalPages;
                const maxVisible = 5;
                let startPage = Math.max(1, currentPage - Math.floor(maxVisible / 2));
                let endPage = Math.min(totalPages, startPage + maxVisible - 1);
                
                if (endPage - startPage + 1 < maxVisible) {
                    startPage = Math.max(1, endPage - maxVisible + 1);
                }
            %>

            <!-- First page if not in range -->
            <% if (startPage > 1) { %>
                <a href="?page=1<%= typeof filters !== 'undefined' && filters ? '&' + new URLSearchParams(filters).toString() : '' %>" 
                   class="pagination-item">1</a>
                <% if (startPage > 2) { %>
                    <span class="pagination-ellipsis">...</span>
                <% } %>
            <% } %>

            <!-- Page range -->
            <% for (let i = startPage; i <= endPage; i++) { %>
                <% if (i === currentPage) { %>
                    <span class="pagination-item active"><%= i %></span>
                <% } else { %>
                    <a href="?page=<%= i %><%= typeof filters !== 'undefined' && filters ? '&' + new URLSearchParams(filters).toString() : '' %>" 
                       class="pagination-item"><%= i %></a>
                <% } %>
            <% } %>

            <!-- Last page if not in range -->
            <% if (endPage < totalPages) { %>
                <% if (endPage < totalPages - 1) { %>
                    <span class="pagination-ellipsis">...</span>
                <% } %>
                <a href="?page=<%= totalPages %><%= typeof filters !== 'undefined' && filters ? '&' + new URLSearchParams(filters).toString() : '' %>" 
                   class="pagination-item"><%= totalPages %></a>
            <% } %>

            <!-- Next Page -->
            <% if (pagination.hasNextPage) { %>
                <a href="?page=<%= pagination.currentPage + 1 %><%= typeof filters !== 'undefined' && filters ? '&' + new URLSearchParams(filters).toString() : '' %>" 
                   class="pagination-item pagination-next">
                    <i class="fas fa-chevron-right"></i>
                    <span class="sr-only">Next</span>
                </a>
            <% } else { %>
                <span class="pagination-item pagination-next disabled">
                    <i class="fas fa-chevron-right"></i>
                    <span class="sr-only">Next</span>
                </span>
            <% } %>
        </nav>

        <!-- Pagination Info -->
        <div class="pagination-info">
            <p>
                Showing <%= ((pagination.currentPage - 1) * 12) + 1 %> to 
                <%= Math.min(pagination.currentPage * 12, pagination.totalCourses) %> 
                of <%= pagination.totalCourses %> courses
            </p>
        </div>
    </div>
<% } %>

<style>
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

.pagination-container {
    margin: var(--spacing-2xl) 0;
    text-align: center;
}

.pagination-ellipsis {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    color: var(--text-muted);
}

.pagination-info {
    margin-top: var(--spacing-md);
}

.pagination-info p {
    color: var(--text-muted);
    font-size: 0.875rem;
    margin: 0;
}
</style>
